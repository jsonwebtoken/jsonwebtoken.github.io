// VERSION: 1.1 LAST UPDATE: 24.02.2016
/*
 *           .       .   .
 *          |       |   |
 * ,-. ,-. |-. . . |-  |-  ,-. ;-. ,-.
 * |   `-. | | | | |   |   | | | | `-.
 * `-' `-' `-' `-` `-' `-' `-' ' ' `-'
 *
 * Social customs counter buttons (Facebook, Twitter, Google+, LinkedIn, Pinterest)
 * Made by Mathieu ORLANDO, contact@acrow.fr, Acrow, FRANCE
 * Website: http://csbuttons.acrow.fr/
 */
!function(t){t.fn.cSButtons=function(a){var n={url:null,type:"facebook",txt:null,via:null,count:!1,count_position:"right",apikey:null,media:null,lang:null,total:null},e=t.extend(n,a),s=0,o=this.length,i=0,r=0;return this.each(function(){i++;var a=void 0!=t(this).attr("data-url")&&""!=t(this).attr("data-url")?t(this).attr("data-url"):e.url,n=void 0!=t(this).attr("data-type")&&""!=t(this).attr("data-type")?t(this).attr("data-type"):e.type,u=void 0!=t(this).attr("data-txt")&&""!=t(this).attr("data-txt")?t(this).attr("data-txt"):e.txt,l=void 0!=t(this).attr("data-via")&&""!=t(this).attr("data-via")?t(this).attr("data-via"):e.via,c=void 0!=t(this).attr("data-count")&&""!=t(this).attr("data-count")?t(this).attr("data-count"):e.count,p=void 0!=t(this).attr("data-count-position")&&""!=t(this).attr("data-count-position")?t(this).attr("data-count-position"):e.count_position,d=void 0!=t(this).attr("data-apikey")&&""!=t(this).attr("data-apikey")?t(this).attr("data-apikey"):e.apikey,h=void 0!=t(this).attr("data-media")&&""!=t(this).attr("data-media")?t(this).attr("data-media"):e.media,f=void 0!=t(this).attr("data-lang")&&""!=t(this).attr("data-lang")?t(this).attr("data-lang"):e.lang,v=0,w=0,b="";switch(a=null!=a?a:document.URL,$URL=a,c&&("left"==p?t(this).prepend('<span class="csbuttons-count" />'):t(this).append('<span class="csbuttons-count" />')),n){case"twitter":var g=t(this);v=550,w=420,b=null!=u?"https://twitter.com/intent/tweet?original_referer="+encodeURIComponent(document.URL)+"&text="+encodeURIComponent(u)+"&url="+encodeURIComponent(a):"https://twitter.com/intent/tweet?original_referer="+encodeURIComponent(document.URL)+"&url="+encodeURIComponent(a),b=null!=l?b+"&via="+l:b,c&&(t("span.csbuttons-count",g).text(0),t.getJSON("http://opensharecount.com/count.json?url="+$URL,function(a){t("span.csbuttons-count",g).text(a.count),s+=isNaN(parseInt(a.count))?0:parseInt(a.count),null!=e.total&&i==o&&t(e.total).text(s)}));break;case"google":var m=t(this);r++,v=600,w=600,b="https://plus.google.com/share?url="+a,b=null!=f?b+"&hl="+f:b,c&&(t("span.csbuttons-count",m).text(0),null!=d?t.post("https://clients6.google.com/rpc?key="+d,{method:"pos.plusones.get",id:"p",params:{nolog:!0,id:$URL,source:"widget",userId:"@viewer",groupId:"@self"},jsonrpc:"2.0",key:"p",apiVersion:"v1"},function(a){t("span.csbuttons-count",m).text(a.result.metadata.globalCounts.count),s+=isNaN(parseInt(a.result.metadata.globalCounts.count))?0:parseInt(a.result.metadata.globalCounts.count),null!=e.total&&i==o&&t(e.total).text(s)}):(window["gplus"+r]=m,window.services||(window.services={}),window.services.gplus={cb:function(t){window["gplusnb"+r]=""==t?0:t}},t.getJSON("http://share.yandex.ru/gpp.xml?url="+$URL+"&callback=?",function(a){var n=a.replace("/**/ typeof  === 'function' && (\"","");n=n.replace('");',""),t("span.csbuttons-count",m).text(a),s+=isNaN(parseInt(a))?0:parseInt(a),null!=e.total&&i==o&&t(e.total).text(s)})));break;case"linkedin":var x=t(this);v=600,w=213,b="https://www.linkedin.com/cws/share?url="+a,c&&(t("span.csbuttons-count",x).text(0),t.getJSON("http://www.linkedin.com/countserv/count/share?url="+$URL+"&callback=?",function(a){t("span.csbuttons-count",x).text(a.count),s+=isNaN(parseInt(a.count))?0:parseInt(a.count),null!=e.total&&i==o&&t(e.total).text(s)}));break;case"pinterest":var k=t(this);v=1e3,w=617,b="http://www.pinterest.com/pin/create/button/?url="+a,b=null!=h?b+"&media="+h:b,b=null!=u?b+"&description="+u:b,c&&(t("span.csbuttons-count",k).text(0),t.getJSON("https://api.pinterest.com/v1/urls/count.json?url="+$URL+"&callback=?",function(a){t("span.csbuttons-count",k).text(a.count),s+=isNaN(parseInt(a.count))?0:parseInt(a.count),null!=e.total&&i==o&&t(e.total).text(s)}));break;default:var I=t(this);v=670,w=340,b="https://www.facebook.com/sharer/sharer.php?u="+a,c&&(t("span.csbuttons-count",I).text(0),t.getJSON("http://graph.facebook.com/?id="+$URL,function(a){t("span.csbuttons-count",I).text(a.shares),s+=isNaN(parseInt(a.shares))?0:parseInt(a.shares),null!=e.total&&i==o&&t(e.total).text(s)}))}t(this).on("click tap",function(){var t=screen.width/2-v/2,a=screen.height/2-w/2;popupWindow=window.open(b,"popUpWindow","height="+w+",width="+v+",left="+t+",top="+a+",resizable=yes,scrollbars=yes,toolbar=no,menubar=no,location=no,directories=no,status=yes")})})}}(jQuery);
